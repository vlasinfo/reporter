!function(){"use strict";var e=angular.module("oc.modal",[]);e.factory("$ocModal",["$rootScope","$controller","$location","$timeout","$compile","$sniffer","$q",function(e,n,t,o,a,r,i){var l,c=angular.element(document.body),s=angular.element('<div role="dialog" tabindex="-1" class="modal"><div class="modal-backdrop"></div></div>'),u=angular.element('<div class="modal-wrapper"></div>'),d={},p=[];u.css("display","none"),u.append(s),c.append(u),
    s.on("click",function(t){angular.element(t.target).hasClass("modal-backdrop")&&e.$apply(function(){v.closeOnEsc()}),t.stopPropagation()});var f=function(e){var t=0,n=angular.isString(e)?e.split(/\s*,\s*/):[];return angular.forEach(n,function(e){t=Math.max(parseFloat(e)||0,t)}),t},m=function(e){var t=0;if(r.transitions||r.animations){var n="animation",i="transition",s=r.vendorPrefix+"Animation",o=r.vendorPrefix+"Transition",u="Duration",a="Delay",l="IterationCount",c=1;angular.forEach(e,function(e){if(e.nodeType==c){var r=window.getComputedStyle(e)||{},h=Math.max(f(r[i+a]),f(r[o+a])),p=Math.max(f(r[n+a]),f(r[s+a])),d=Math.max(f(r[i+u]),f(r[o+u])),v=Math.max(f(r[n+u]),f(r[s+u]));v>0&&(v*=Math.max(parseInt(r[n+l])||0,parseInt(r[s+l])||0,1)),t=Math.max(p+v,h+d,t)}})}return 1e3*t};angular.element(document).on("keyup",function(t){27==t.keyCode&&p.length>0&&(t.stopPropagation(),e.$apply(function(){v.closeOnEsc(p[p.length-1])}))});var v={waitingForOpen:!1,getOpenedModals:function(){return p},register:function(e){d[e.id||"_default"]=e},remove:function(e){delete d[e||"_default"]},open:function(t){"string"==typeof t&&(t=t.match("<")?{template:t}:{url:t});var r=d[t.id||"_default"];if(!r)return s.append(a('<div oc-modal="'+(t.id?t.id:"_default")+'"></div>')(e)),void o(function(){v.open(t)});if(r&&-1!==p.indexOf(t.id||"_default")){if(v.waitingForOpen)return;return v.waitingForOpen=!0,void v.close(t.id).then(function(){v.open(t)})}if(!v.waitingForOpen)if(0===p.length)l=document.body.style.overflow,document.body.style.overflow="hidden",u.css("display","block");else for(var i=0,f=p.length;f>i;i++){var m=d[p[i]].$element;d[p[i]].baseZIndex=m.css("z-index"),m.css("z-index","-1"),m.addClass("no-backdrop")}v.waitingForOpen=!1,p.push(t.id||"_default"),r.params=t,r.$scope.customClass=r.params.cls,e.$digest(),c[0].offsetWidth,o(function(){r.$scope.modalShow=!0},100),("function"==typeof r.params.onOpen||"string"==typeof r.params.onOpen)&&eval("r.params.onOpen="+r.params.onOpen+"()");var h=r.$scope.$on("$includeContentLoaded",function(e){r.params.init&&!r.params.isolate&&angular.extend(e.targetScope,r.params.init),"string"==typeof r.params.controller&&n(r.params.controller,{$scope:e.targetScope,$init:r.params.init,$ocModalParams:r.params}),h()});if(r.params.template)r.$scope.modalTemplate=r.params.template;else{if(!r.params.url)throw"You need to define a template or an url";r.$scope.modalUrl=r.params.url}"function"==typeof callback&&r.$scope.callbacksList.push(callback)},closeOnEsc:function(e){return d[e||p[p.length-1]].params.closeOnEsc!==!1?v.close(e):void 0},close:function(e){var n,t=i.defer();n="string"==typeof e&&-1!==p.indexOf(e)?Array.prototype.slice.call(arguments,1):arguments,("undefined"==typeof e||-1===p.indexOf(e))&&(e=p[p.length-1]);var a=d[e||p[p.length-1]];if(a&&a.$scope.modalShow===!0){var r=m(angular.element(a.$element[0].querySelector(".modal-content")));o(function(){a.$scope.modalShow=!1,o(function(){if(a.$scope.$destroy(),a.$element.remove(),a.callbacksList=[],p.splice(p.indexOf(e||p[p.length-1]),1),0===p.length)v.waitingForOpen||(document.body.style.overflow=l,u.css("display","none"));else{var o=d[p[p.length-1]];o.$element.css("z-index",o.baseZIndex),o.$element.removeClass("no-backdrop")}"function"==typeof a.params.onClose&&a.params.onClose.apply(void 0,n)||"string"==typeof a.params.onClose&&eval(a.params.onClose+"()"),t.resolve()},r)})}else t.resolve();return t.promise}};return v}]),e.directive("ocModal",["$ocModal","$compile","$timeout",function(e,t){return{restrict:"AE",replace:!0,scope:!0,template:'<div class="modal-dialog"><div class="modal-backdrop"></div><div class="modal-content {{customClass}}" ng-class="{opened: modalShow}" ng-if="modalTemplate"></div><div class="modal-content {{customClass}}" ng-class="{opened: modalShow}" ng-include="modalUrl"></div></div>',link:function(r,i,s){var o,u=s.ocModal;r.closeModal=function(){var t=Array.prototype.slice.call(arguments);t.unshift(u),e.close.apply(void 0,t)},e.register({id:u,$scope:r,$element:i}),i.on("$destroy",function(){e.remove(u)}),r.$watch("modalTemplate",function(e){"undefined"!=typeof e&&(o||(o=angular.element(i.children()[1])),o.append(t(e)(r)),r.$emit("$includeContentLoaded"))})}}}]),e.directive("ocModalOpen",["$ocModal",function(e){return{restrict:"A",require:"?modal",link:function(t,n,r){n.on("click touchstart",function(n){n.preventDefault(),n.stopPropagation();var i=t.$new(),s=i.$eval(r.ocModalOpen);if(s){if("number"==typeof s?s={url:r.ocModalOpen}:"string"==typeof s&&(s={url:s}),!s.url)throw"You need to set the modal url";t.$apply(function(){e.open(s)})}})}}}]),e.directive("ocModalClose",["$ocModal",function(e){return{restrict:"A",require:"?modal",link:function(t,n,r){n.on("click touchstart",function(n){n.preventDefault(),n.stopPropagation(),t.$apply(function(){if(r.ocModalClose)var n=t.$new().$eval(r.ocModalClose);e.close(n)})})}}}])}(),function(e,t,n){function r(e){y.cssText=e}function i(e,t){return typeof e===t}function s(e,t){return!!~(""+e).indexOf(t)}function o(e,t){for(var r in e){var i=e[r];if(!s(i,"-")&&y[i]!==n)return"pfx"==t?i:!0}return!1}function u(e,t,r){for(var s in e){var o=t[e[s]];if(o!==n)return r===!1?e[s]:i(o,"function")?o.bind(r||t):o}return!1}function a(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),s=(e+" "+w.join(r+" ")+r).split(" ");return i(t,"string")||i(t,"undefined")?o(s,t):(s=(e+" "+E.join(r+" ")+r).split(" "),u(s,t,n))}var f,l,c,h="2.8.2",p={},d=!0,v=t.documentElement,m="modernizr",g=t.createElement(m),y=g.style,b=({}.toString,"Webkit Moz O ms"),w=b.split(" "),E=b.toLowerCase().split(" "),S={},x=[],T=x.slice,N={}.hasOwnProperty;c=i(N,"undefined")||i(N.call,"undefined")?function(e,t){return t in e&&i(e.constructor.prototype[t],"undefined")}:function(e,t){return N.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=T.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=t.prototype;var s=new i,o=t.apply(s,n.concat(T.call(arguments)));return Object(o)===o?o:s}return t.apply(e,n.concat(T.call(arguments)))};return r}),S.flexbox=function(){return a("flexWrap")},S.csstransforms=function(){return!!a("transform")};for(var C in S)c(S,C)&&(l=C.toLowerCase(),p[l]=S[C](),x.push((p[l]?"":"no-")+l));return p.addTest=function(e,t){if("object"==typeof e)for(var r in e)c(e,r)&&p.addTest(r,e[r]);else{if(e=e.toLowerCase(),p[e]!==n)return p;t="function"==typeof t?t():t,"undefined"!=typeof d&&d&&(v.className+=" "+(t?"":"no-")+e),p[e]=t}return p},r(""),g=f=null,function(e,t){function n(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var e=y.elements;return"string"==typeof e?e.split(" "):e}function i(e){var t=g[e[v]];return t||(t={},m++,e[v]=m,g[m]=t),t}function s(e,n,r){if(n||(n=t),l)return n.createElement(e);r||(r=i(n));var s;return s=r.cache[e]?r.cache[e].cloneNode():d.test(e)?(r.cache[e]=r.createElem(e)).cloneNode():r.createElem(e),!s.canHaveChildren||p.test(e)||s.tagUrn?s:r.frag.appendChild(s)}function o(e,n){if(e||(e=t),l)return e.createDocumentFragment();n=n||i(e);for(var s=n.frag.cloneNode(),o=0,u=r(),a=u.length;a>o;o++)s.createElement(u[o]);return s}function u(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return y.shivMethods?s(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/[\w\-]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(y,t.frag)}function a(e){e||(e=t);var r=i(e);return!y.shivCSS||f||r.hasCSS||(r.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),l||u(e,r),e}var f,l,c="3.7.0",h=e.html5||{},p=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,d=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,v="_html5shiv",m=0,g={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",f="hidden"in e,l=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(n){f=!0,l=!0}}();var y={elements:h.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:c,shivCSS:h.shivCSS!==!1,supportsUnknownElements:l,shivMethods:h.shivMethods!==!1,type:"default",shivDocument:a,createElement:s,createDocumentFragment:o};e.html5=y,a(t)}(this,t),p._version=h,p._domPrefixes=E,p._cssomPrefixes=w,p.testProp=function(e){return o([e])},p.testAllProps=a,v.className=v.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(d?" js "+x.join(" "):""),p}(this,this.document)